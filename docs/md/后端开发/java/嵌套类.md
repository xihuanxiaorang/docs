# åµŒå¥—ç±»

Java ç¼–ç¨‹è¯­è¨€å…è®¸ä½ <strong style="color:#ae3520;">åœ¨ä¸€ä¸ªç±»å†…éƒ¨å®šä¹‰å¦ä¸€ä¸ªç±»</strong>ï¼Œè¿™æ ·çš„ç±»è¢«ç§°ä¸º<strong style="color:#ae3520;">åµŒå¥—ç±»</strong>ï¼Œå¹¶å¦‚ä¸‹æ‰€ç¤ºï¼š

```java
class OuterClass {
  	...
    class NestedClass {
      ...
    }
}
```

åµŒå¥—ç±»åˆ†ä¸ºä¸¤ç±»ï¼šéé™æ€å’Œé™æ€ã€‚<strong style="color:#ae3520;">éé™æ€åµŒå¥—ç±»ç§°ä¸º*å†…éƒ¨ç±»*ï¼Œå£°æ˜ `static` çš„åµŒå¥—ç±»ç§°ä¸º*é™æ€åµŒå¥—ç±»*</strong>ã€‚

```java
class OuterClass {
    ...
    class InnerClass {
      ...
    }
  
    static class StaticNestedClass {
      ...
    }
}
```

åµŒå¥—ç±»æ˜¯å…¶å¤–éƒ¨ç±»çš„ä¸€ä¸ªæˆå‘˜ã€‚<strong style="color:#ae3520;">éé™æ€åµŒå¥—ç±»ï¼ˆå†…éƒ¨ç±»ï¼‰å¯ä»¥è®¿é—®å¤–éƒ¨ç±»çš„å…¶ä»–æˆå‘˜ï¼Œå³ä½¿è¿™äº›æˆå‘˜è¢«å£°æ˜ä¸ºç§æœ‰</strong>ï¼Œè€Œé™æ€åµŒå¥—ç±»åˆ™æ— æ³•ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„å…¶ä»–æˆå‘˜ã€‚

<strong style="color:#ae3520;">ä½œä¸ºå¤–éƒ¨ç±»çš„ä¸€ä¸ªæˆå‘˜ï¼ŒåµŒå¥—ç±»å¯ä»¥å£°æ˜ä¸ºç§æœ‰ `private`ã€å…¬æœ‰ `public`ã€å—ä¿æŠ¤ `protected` æˆ–è€…åŒ…ç§æœ‰ `default` çš„</strong>ã€‚ï¼ˆå›æƒ³ä¸€ä¸‹ï¼Œå¤–éƒ¨ç±»åªèƒ½å£°æ˜ä¸ºå…¬æœ‰ `public` æˆ–åŒ…ç§æœ‰ `default` çš„ã€‚ï¼‰

## ä¸ºä»€ä¹ˆä½¿ç”¨åµŒå¥—ç±»ï¼Ÿ

ä½¿ç”¨åµŒå¥—ç±»çš„æœ‰åŠ›ç†ç”±åŒ…æ‹¬ï¼š

- è¿™æ˜¯ä¸€ç§<strong style="color:#ae3520;">å¯¹ä»…åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨çš„ç±»è¿›è¡Œé€»è¾‘åˆ†ç»„</strong>çš„æ–¹å¼ï¼šå¦‚æœä¸€ä¸ªç±»ä»…å¯¹å¦ä¸€ä¸ªç±»æœ‰ç”¨ï¼Œé‚£ä¹ˆå°†å…¶åµŒå…¥åˆ°è¯¥ç±»ä¸­å¹¶ä¿æŒä¸¤è€…åœ¨ä¸€èµ·æ˜¯åˆç†çš„ã€‚åµŒå¥—è¿™æ ·çš„â€œè¾…åŠ©ç±»â€å¯ä»¥ä½¿å®ƒä»¬çš„åŒ…æ›´åŠ ç®€æ´ã€‚
- å®ƒ<strong style="color:#ae3520;">å¢åŠ äº†å°è£…æ€§</strong>ï¼šè€ƒè™‘ä¸¤ä¸ªé¡¶çº§ç±» `A` å’Œ `B`ï¼Œå…¶ä¸­ç±» `B` éœ€è¦è®¿é—®ç±» `A` ä¸­æœ¬åº”å£°æ˜ä¸ºç§æœ‰çš„æˆå‘˜ã€‚å¯ä»¥é€šè¿‡å°†ç±» `B` éšè—åœ¨ç±» `A` çš„å†…éƒ¨ï¼Œå³ä½¿ç±» `A` çš„æˆå‘˜å£°æ˜ä¸ºç§æœ‰çš„ï¼Œç±» `B` ä»ç„¶å¯ä»¥è®¿é—®å®ƒä»¬ã€‚æ­¤å¤–ï¼Œç±» `B` æœ¬èº«ä¹Ÿå¯ä»¥å¯¹å¤–ç•Œéšè—ã€‚
- å®ƒå¯ä»¥<strong style="color:#ae3520;">äº§ç”Ÿæ›´å…·å¯è¯»æ€§å’Œå¯ç»´æŠ¤æ€§çš„ä»£ç </strong>ï¼šåœ¨é¡¶çº§ç±»ä¸­åµŒå¥—å°å‹ç±»å¯ä»¥ä½¿ä»£ç æ›´æ¥è¿‘å…¶ä½¿ç”¨ä½ç½®ã€‚

## å†…éƒ¨ç±»

<strong style="color:#ae3520;">å†…éƒ¨ç±»å°±åƒæ˜¯å¤–éƒ¨ç±»çš„ä¸€ä¸ªæˆå‘˜ï¼Œå®ƒä¸å¤–éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ç´§å¯†ç›¸è¿ã€‚è¿™ä½¿å¾—å†…éƒ¨ç±»å¯ä»¥è‡ªç”±åœ°è®¿é—®å¤–éƒ¨ç±»å®ä¾‹çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§</strong>ã€‚ä½†æ˜¯ï¼Œ<strong style="color:#ae3520;">ç”±äºå†…éƒ¨ç±»ä¾èµ–äºå¤–éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ï¼Œæ‰€ä»¥å®ƒä¸èƒ½å®šä¹‰è‡ªå·±çš„é™æ€æˆå‘˜ï¼ˆæ¯”å¦‚é™æ€æ–¹æ³•æˆ–é™æ€å˜é‡ï¼‰</strong>ï¼Œå› ä¸ºé™æ€æˆå‘˜æ˜¯ç‹¬ç«‹äºä»»ä½•å…·ä½“å®ä¾‹å­˜åœ¨çš„ã€‚

<strong style="color:#ae3520;">å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡æ˜¯åœ¨å¤–éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ä¸­åˆ›å»ºçš„</strong>ã€‚è¿™æ„å‘³ç€æ¯ä¸ªå†…éƒ¨ç±»çš„å¯¹è±¡éƒ½ä¸å¤–éƒ¨ç±»çš„ä¸€ä¸ªç‰¹å®šå®ä¾‹ç›¸å…³è”ã€‚

```java
class OuterClass {
    ...
    class InnerClass {
        ...
    }
}
```

<strong style="color:#ae3520;">å†…éƒ¨ç±» `InnerClass` çš„å®ä¾‹å¿…é¡»å­˜åœ¨äºå¤–éƒ¨ç±» (`OuterClass`) çš„ä¸€ä¸ªå®ä¾‹ä¹‹ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªå†…éƒ¨ç±»çš„å®ä¾‹å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»å®ä¾‹çš„æ‰€æœ‰æ–¹æ³•å’Œå­—æ®µ</strong>ã€‚

å¦‚æœä½ <strong style="color:#ae3520;">æƒ³è¦åˆ›å»ºä¸€ä¸ªå†…éƒ¨ç±»çš„å®ä¾‹ï¼Œé¦–å…ˆè¦åˆ›å»ºä¸€ä¸ªå¤–éƒ¨ç±»çš„å®ä¾‹</strong>ã€‚ä¹‹åï¼Œä½ å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„è¯­æ³•åœ¨å¤–éƒ¨å¯¹è±¡å†…éƒ¨åˆ›å»ºå†…éƒ¨ç±»çš„å¯¹è±¡ï¼š

```java
// åˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹
OuterClass outerInstance = new OuterClass();

// åœ¨å¤–éƒ¨å¯¹è±¡å†…éƒ¨åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹
OuterClass.InnerClass innerInstance = outerInstance.new InnerClass();
```

### ä¸¾ä¸ªæ —å­

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼Œå®šä¹‰ä¸€ä¸ªæ•´å‹æ•°ç»„ï¼Œç”¨ä¸€äº›æ•´æ•°å€¼å¡«å……æ•°ç»„ï¼Œç„¶åä½¿ç”¨å†…éƒ¨ç±»æ¥å°è£…æŸ¥æ‰¾å¹¶æŒ‰å‡åºæ‰“å°å¶æ•°ç´¢å¼•å…ƒç´ çš„é€»è¾‘ã€‚

[DataStructure.java](https://docs.oracle.com/javase/tutorial/java/javaOO/examples/DataStructure.java) ç¤ºä¾‹ç”±ä»¥ä¸‹éƒ¨åˆ†ç»„æˆï¼š

- `DataStructure` å¤–éƒ¨ç±»ï¼Œå…¶ä¸­åŒ…æ‹¬ä¸€ä¸ªç”¨äºåˆ›å»º `DataStructure` å®ä¾‹çš„æ„é€ å‡½æ•°ï¼Œè¯¥å®ä¾‹åŒ…å«ä¸€ä¸ªç”±è¿ç»­æ•´æ•°å€¼ï¼ˆ0ã€1ã€2ã€3 ç­‰ï¼‰å¡«å……çš„æ•°ç»„ï¼Œä»¥åŠä¸€ä¸ªç”¨äºæ‰“å°æ•°ç»„ä¸­å…·æœ‰å¶æ•°ç´¢å¼•çš„å…ƒç´ çš„æ–¹æ³•ã€‚
- `EvenIterator` å†…éƒ¨ç±»ï¼Œå®ƒå®ç°äº† `DataStructureIterator` æ¥å£ï¼Œè¯¥æ¥å£æ‰©å±•äº† `Iterator<Integer>` æ¥å£ã€‚è¿­ä»£å™¨ç”¨äºéå†æ•°æ®ç»“æ„ï¼Œå¹¶é€šå¸¸å…·æœ‰æµ‹è¯•æœ€åä¸€ä¸ªå…ƒç´ ã€æ£€ç´¢å½“å‰å…ƒç´ ä»¥åŠç§»åŠ¨åˆ°ä¸‹ä¸€ä¸ªå…ƒç´ çš„æ–¹æ³•ã€‚
- `main` æ–¹æ³•ï¼Œç”¨äºå®ä¾‹åŒ–ä¸€ä¸ª `DataStructure` å¯¹è±¡ (`ds`)ï¼Œç„¶åè°ƒç”¨ `printEven` æ–¹æ³•æ¥æ‰“å°æ•°ç»„ `arrayOfInts` ä¸­å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„å…ƒç´ ã€‚

```java
public class DataStructure {

    // Create an array
    private final static int SIZE = 15;
    private final int[] arrayOfInts = new int[SIZE];

    public DataStructure() {
        // fill the array with ascending integer values
        for (int i = 0; i < SIZE; i++) {
            arrayOfInts[i] = i;
        }
    }

    public void printEven() {

        // Print out values of even indices of the array
        DataStructureIterator iterator = this.new EvenIterator();
        while (iterator.hasNext()) {
            System.out.print(iterator.next() + " ");
        }
        System.out.println();
    }

    public static void main(String[] s) {

        // Fill the array with integer values and print out only
        // values of even indices
        DataStructure ds = new DataStructure();
        ds.printEven();
    }

    // Inner class implements the DataStructureIterator interface,
    // which extends the Iterator<Integer> interface

    interface DataStructureIterator extends java.util.Iterator<Integer> {
    }

    private class EvenIterator implements DataStructureIterator {

        // Start stepping through the array from the beginning
        private int nextIndex = 0;

        @Override
        public boolean hasNext() {

            // Check if the current element is the last in the array
            return (nextIndex <= SIZE - 1);
        }

        @Override
        public Integer next() {

            // Record a value of an even index of the array
            Integer retValue = arrayOfInts[nextIndex];

            // Get the next even element
            nextIndex += 2;
            return retValue;
        }
    }
}
```

è¿è¡Œç»“æœå¦‚ä¸‹æ‰€ç¤ºï¼š

```
0 2 4 6 8 10 12 14 
```

è¯·æ³¨æ„ï¼Œ`EvenIterator` ç±»ç›´æ¥å¼•ç”¨äº† `DataStructure` å¯¹è±¡çš„ `arrayOfInts` å®ä¾‹å˜é‡ã€‚

ä½ å¯ä»¥åˆ©ç”¨å†…éƒ¨ç±»æ¥å®ç°åƒæœ¬ä¾‹ä¸­çš„è¾…åŠ©ç±»ã€‚åœ¨å¤„ç†ç”¨æˆ·ç•Œé¢äº‹ä»¶æ—¶ï¼Œä½ å¿…é¡»æŒæ¡å¦‚ä½•ä½¿ç”¨å†…éƒ¨ç±»ï¼Œå› ä¸ºäº‹ä»¶å¤„ç†æœºåˆ¶å¤§é‡ä½¿ç”¨äº†å†…éƒ¨ç±»ã€‚

### å±€éƒ¨ç±»ä¸åŒ¿åç±»

å­˜åœ¨ä¸¤ç§ç‰¹æ®Šçš„å†…éƒ¨ç±»ï¼š

- [å±€éƒ¨ç±»](#localclasses)ï¼š<strong style="color:#ae3520;">åœ¨æ–¹æ³•ä½“ä¸­å£°æ˜çš„å†…éƒ¨ç±»</strong>ï¼›
- [åŒ¿åç±»](#anonymousclasses)ï¼š<strong style="color:#ae3520;">åœ¨æ–¹æ³•ä½“ä¸­å£°æ˜çš„*æœªå‘½å*çš„å†…éƒ¨ç±»</strong>ã€‚

### ä¿®é¥°ç¬¦

ä½ å¯ä»¥ä½¿ç”¨ä¸å¤–éƒ¨ç±»çš„å…¶ä»–æˆå‘˜ç›¸åŒçš„è®¿é—®é™å®šç¬¦æ¥ä¿®é¥°å†…éƒ¨ç±»ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥ä½¿ç”¨ `private`ã€`public` å’Œ `protected` æ¥é™åˆ¶å¯¹å†…éƒ¨ç±»çš„è®¿é—®ï¼Œå°±åƒä½ ä½¿ç”¨å®ƒä»¬æ¥é™åˆ¶å¯¹å…¶ä»–ç±»æˆå‘˜çš„è®¿é—®ä¸€æ ·ã€‚

## é™æ€åµŒå¥—ç±»

å°±åƒç±»çš„æ–¹æ³•å’Œå˜é‡ä¸€æ ·ï¼Œé™æ€åµŒå¥—ç±»ä¸å®ƒçš„å¤–éƒ¨ç±»ç›¸å…³è”ï¼Œä½†å®ƒä¸åƒæ™®é€šå†…éƒ¨ç±»é‚£æ ·ä¾èµ–äºå¤–éƒ¨ç±»çš„ä¸€ä¸ªå®ä¾‹ã€‚<strong style="color:#ae3520;">é™æ€åµŒå¥—ç±»ä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹å˜é‡æˆ–æ–¹æ³•ï¼Œè€Œæ˜¯å¿…é¡»é€šè¿‡ä¸€ä¸ªæŒ‡å‘å¤–éƒ¨ç±»å®ä¾‹çš„å¼•ç”¨æ¥è¿›è¡Œè®¿é—®</strong>ã€‚[å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹](#inner-class-and-nested-static-class-example)æ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚

> [!note]
>
> <strong style="color:#ae3520;">é™æ€åµŒå¥—ç±»ä¸å¤–éƒ¨ç±»æˆ–å…¶ä»–ç±»çš„å®ä¾‹æˆå‘˜äº¤äº’æ—¶çš„è¡Œä¸ºä¸å…¶ä»–é¡¶çº§ç±»æ˜¯ä¸€æ ·çš„</strong>ã€‚å®é™…ä¸Šï¼Œé™æ€åµŒå¥—ç±»åœ¨è¡Œä¸ºä¸Šç±»ä¼¼äºä¸€ä¸ªé¡¶çº§ç±»ï¼Œåªä¸è¿‡ä¸ºäº†æ–¹ä¾¿æ‰“åŒ…è€Œè¢«åµŒå¥—åœ¨å¦ä¸€ä¸ªé¡¶çº§ç±»ä¸­ã€‚[å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹](#inner-class-and-nested-static-class-example)ä¹Ÿæ¼”ç¤ºäº†è¿™ä¸€ç‚¹ã€‚

å®ä¾‹åŒ–é™æ€åµŒå¥—ç±»çš„æ–¹å¼ä¸å®ä¾‹åŒ–é¡¶çº§ç±»çš„æ–¹å¼ç›¸åŒã€‚è¿™æ„å‘³ç€ä½ <strong style="color:#ae3520;">å¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥åˆ›å»ºé™æ€åµŒå¥—ç±»çš„å®ä¾‹ï¼Œè€Œä¸éœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹</strong>ã€‚

```java
// å®ä¾‹åŒ–é™æ€åµŒå¥—ç±»ï¼Œä¸å®ä¾‹åŒ–é¡¶çº§ç±»ç›¸åŒ
OuterClass.StaticNestedClass staticNestedInstance = new OuterClass.StaticNestedClass();
```

## å†…éƒ¨ç±»å’ŒåµŒå¥—é™æ€ç±»ç¤ºä¾‹ {#inner-class-and-nested-static-class-example}

::: code-group

```java [OuterClass]
public class OuterClass {
    String outerField = "Outer field";
    static String staticOuterField = "Static outer field";

    class InnerClass {
        void accessMembers() {
            System.out.println(outerField);
            System.out.println(staticOuterField);
        }
    }

    static class StaticNestedClass {
      void accessMembers(OuterClass outer) {
        // Compiler error: Cannot make a static reference to the non-static field outerField
        // System.out.println(outerField);
        System.out.println(outer.outerField);
        System.out.println(staticOuterField);
      }
    }

    public static void main(String[] args) {
        System.out.println("Inner class:");
        System.out.println("------------");
        OuterClass outerObject = new OuterClass();
        OuterClass.InnerClass innerObject = outerObject.new InnerClass();
        innerObject.accessMembers();

        System.out.println("\nStatic nested class:");
        System.out.println("--------------------");
        StaticNestedClass staticNestedObject = new StaticNestedClass();        
        staticNestedObject.accessMembers(outerObject);

        System.out.println("\nTop-level class:");
        System.out.println("--------------------");
        TopLevelClass topLevelObject = new TopLevelClass();        
        topLevelObject.accessMembers(outerObject);                
    }
}
```

```java [TopLevelClass]
public class TopLevelClass {
    void accessMembers(OuterClass outer) {     
        // Compiler error: Cannot make a static reference to the non-static field OuterClass.outerField
        // System.out.println(OuterClass.outerField);
        System.out.println(outer.outerField);
        System.out.println(OuterClass.staticOuterField);
    }  
}
```

:::

æ­¤ç¤ºä¾‹æ‰“å°ä»¥ä¸‹è¾“å‡ºï¼š

```
Inner class:
------------
Outer field
Static outer field

Static nested class:
--------------------
Outer field
Static outer field

Top-level class:
--------------------
Outer field
Static outer field
```

è¯·æ³¨æ„ï¼Œé™æ€åµŒå¥—ç±»ä¸å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜äº¤äº’çš„æ–¹å¼ä¸å…¶ä»–é¡¶çº§ç±»ç›¸åŒã€‚é™æ€åµŒå¥—ç±» `StaticNestedClass` ä¸èƒ½ç›´æ¥è®¿é—® `outerField`ï¼Œå› ä¸ºå®ƒæ˜¯å¤–éƒ¨ç±» `OuterClass` çš„ä¸€ä¸ªå®ä¾‹å˜é‡ã€‚Java ç¼–è¯‘å™¨ä¼šåœ¨é«˜äº®æ˜¾ç¤ºçš„è¯­å¥å¤„ç”Ÿæˆä¸€ä¸ªé”™è¯¯ï¼š

```java
static class StaticNestedClass {
    void accessMembers(OuterClass outer) {
        // Compiler error: Cannot make a static reference to the non-static field outerField
        System.out.println(outerField); // [!code error]
    }
}
```

è¦ä¿®å¤è¿™ä¸ªé”™è¯¯ï¼Œä½ éœ€è¦é€šè¿‡å¯¹è±¡å¼•ç”¨çš„æ–¹å¼æ¥è®¿é—® `outerField`ï¼š

```java
System.out.println(outer.outerField);
```

åŒæ ·åœ°ï¼Œé¡¶çº§ç±» `TopLevelClass` ä¹Ÿä¸èƒ½ç›´æ¥è®¿é—® `outerField`ã€‚

## Shadowing<span style="font-size:13px;color:#909399;"> - é®è”½/è¦†ç›–</span> {#shadowing}

<strong style="color:#ae3520;">å¦‚æœåœ¨ä¸€ä¸ªç‰¹å®šçš„ä½œç”¨åŸŸï¼ˆå¦‚å†…éƒ¨ç±»æˆ–æ–¹æ³•å®šä¹‰ï¼‰å†…çš„ç±»å‹å£°æ˜ï¼ˆå¦‚æˆå‘˜å˜é‡æˆ–å‚æ•°åç§°ï¼‰ä¸å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å¦ä¸€ä¸ªå£°æ˜å…·æœ‰ç›¸åŒçš„åç§°ï¼Œåˆ™è¯¥å£°æ˜ä¼šâ€œé®è”½â€ï¼ˆæˆ–è¦†ç›–ï¼‰å¤–éƒ¨ä½œç”¨åŸŸä¸­çš„å£°æ˜</strong>ã€‚è¿™æ„å‘³ç€ä½ ä¸èƒ½ä»…ä»…é€šè¿‡åç§°æ¥å¼•ç”¨è¢«é®è”½çš„å£°æ˜ã€‚ä¸‹é¢çš„ `ShadowTest` ç¤ºä¾‹å°†æ¼”ç¤ºè¿™ä¸€ç‚¹ï¼š

```java
public class ShadowTest {
    public int x = 0;

    class FirstLevel {
        public int x = 1;

        void methodInFirstLevel(int x) {
            System.out.println("x = " + x);
            System.out.println("this.x = " + this.x);
            System.out.println("ShadowTest.this.x = " + ShadowTest.this.x);
        }
    }

    public static void main(String... args) {
        ShadowTest st = new ShadowTest();
        ShadowTest.FirstLevel fl = st.new FirstLevel();
        fl.methodInFirstLevel(23);
    }
}
```

ä¸‹é¢æ˜¯è¿™ä¸ªç¤ºä¾‹çš„è¾“å‡ºï¼š

```
x = 23
this.x = 1
ShadowTest.this.x = 0
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­å®šä¹‰äº†ä¸‰ä¸ªåä¸º `x` çš„å˜é‡ï¼šä¸€ä¸ªæ˜¯ `ShadowTest` ç±»çš„æˆå‘˜å˜é‡ï¼Œä¸€ä¸ªæ˜¯å†…éƒ¨ç±» `FirstLevel` çš„æˆå‘˜å˜é‡ï¼Œè¿˜æœ‰ä¸€ä¸ªæ˜¯ `methodInFirstLevel` æ–¹æ³•ä¸­çš„å‚æ•°ã€‚å½“ `methodInFirstLevel` æ–¹æ³•ä¸­çš„å‚æ•° `x` ä¸å†…éƒ¨ç±» `FirstLevel` çš„æˆå‘˜å˜é‡åŒåæ—¶ï¼Œå‚æ•° `x` ä¼šé®è”½å†…éƒ¨ç±»çš„æˆå‘˜å˜é‡ `x`ã€‚å› æ­¤ï¼Œå½“ä½ åœ¨ `methodInFirstLevel` æ–¹æ³•ä¸­ä½¿ç”¨å˜é‡ `x` æ—¶ï¼Œå®ƒä¼šå¼•ç”¨æ–¹æ³•å‚æ•°ã€‚<strong style="color:#ae3520;">è‹¥è¦å¼•ç”¨å†…éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨å…³é”®å­— `this` æ¥æ˜ç¡®æŒ‡å®š</strong>ï¼š

```java
System.out.println("this.x = " + this.x);
```

<strong style="color:#ae3520;">å¯ä»¥é€šè¿‡ç±»åæ¥å¼•ç”¨å¤–éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡</strong>ã€‚ä¾‹å¦‚ï¼Œä¸‹é¢çš„è¯­å¥æ˜¯ä» `methodInFirstLevel` æ–¹æ³•ä¸­è®¿é—® `ShadowTest` ç±»çš„æˆå‘˜å˜é‡ï¼š

```java
System.out.println("ShadowTest.this.x = " + ShadowTest.this.x);
```

## åºåˆ—åŒ–

å¼ºçƒˆå»ºè®®ä¸è¦å¯¹å†…éƒ¨ç±»ï¼ˆåŒ…æ‹¬[å±€éƒ¨ç±»](#localclasses)å’Œ[åŒ¿åç±»](#anonymousclasses)ï¼‰[è¿›è¡Œåºåˆ—åŒ–](https://docs.oracle.com/javase/tutorial/jndi/objects/serial.html)ã€‚å½“ Java ç¼–è¯‘å™¨å¤„ç†å†…éƒ¨ç±»æ—¶ï¼Œå®ƒä¼šç”Ÿæˆä¸€äº›åˆæˆç»“æ„ï¼Œè¿™äº›ç»“æ„åŒ…æ‹¬ç±»ã€æ–¹æ³•ã€å­—æ®µå’Œå…¶ä»–åœ¨æºä»£ç ä¸­æ²¡æœ‰å¯¹åº”å®ä½“çš„ç»“æ„ã€‚è¿™äº›ç»“æ„æ˜¯ä¸ºäº†æ”¯æŒæ–°è¯­è¨€ç‰¹æ€§è€Œä¸éœ€è¦ä¿®æ”¹ JVM çš„ã€‚ä½†æ˜¯ï¼Œä¸åŒçš„ Java ç¼–è¯‘å™¨å¯èƒ½ä¼šäº§ç”Ÿä¸åŒçš„åˆæˆç»“æ„ï¼Œå¯¼è‡´ `.class` æ–‡ä»¶åœ¨ä¸åŒå®ç°ä¹‹é—´å¯èƒ½å­˜åœ¨å·®å¼‚ã€‚å› æ­¤ï¼Œå¦‚æœä½ åºåˆ—åŒ–äº†ä¸€ä¸ªå†…éƒ¨ç±»ï¼Œç„¶åä½¿ç”¨å¦ä¸€ä¸ª JRE å®ç°å¯¹å…¶è¿›è¡Œååºåˆ—åŒ–ï¼Œå¯èƒ½ä¼šé‡åˆ°å…¼å®¹æ€§é—®é¢˜ã€‚

## å±€éƒ¨ç±» {#localclasses}

å±€éƒ¨ç±»æ˜¯åœ¨ä¸€ä¸ªå—ä¸­å®šä¹‰çš„ç±»ï¼Œè¿™é‡Œçš„å—æ˜¯ç”±ä¸€å¯¹åŒ¹é…çš„å¤§æ‹¬å·åŒ…å›´çš„ä¸€ç»„é›¶ä¸ªæˆ–å¤šä¸ªè¯­å¥ã€‚ä½ é€šå¸¸ä¼šåœ¨æ–¹æ³•ä½“ä¸­å®šä¹‰å±€éƒ¨ç±»ã€‚

### å£°æ˜å±€éƒ¨ç±»

ä½ å¯ä»¥åœ¨ä»»ä½•ç”±å¤§æ‹¬å·åŒ…å›´çš„ä»£ç å—ï¼ˆå¦‚æ–¹æ³•ä½“ã€for å¾ªç¯æˆ– if è¯­å¥ï¼‰ä¸­å®šä¹‰å±€éƒ¨ç±»ã€‚

[LocalClassExample](https://docs.oracle.com/javase/tutorial/java/javaOO/examples/LocalClassExample.java) ç¤ºä¾‹ç”¨äºéªŒè¯ä¸¤ä¸ªç”µè¯å·ç ï¼Œå¹¶åœ¨ `validatePhoneNumber` æ–¹æ³•ä¸­å®šä¹‰äº†ä¸€ä¸ªå±€éƒ¨ç±» `PhoneNumber`ã€‚

```java
public class LocalClassExample {
  
    static String regularExpression = "[^0-9]";
  
    public static void validatePhoneNumber(String phoneNumber1, String phoneNumber2) {
      
        final int numberLength = 10;
        
        // Valid in JDK 8 and later:
       
        // int numberLength = 10;
       
        class PhoneNumber {
            
            String formattedPhoneNumber = null;

            PhoneNumber(String phoneNumber){
                // numberLength = 7;
                String currentNumber = phoneNumber.replaceAll(regularExpression, "");
                if (currentNumber.length() == numberLength)
                    formattedPhoneNumber = currentNumber;
                else
                    formattedPhoneNumber = null;
            }

            public String getNumber() {
                return formattedPhoneNumber;
            }
            
            // Valid in JDK 8 and later:

//            public void printOriginalNumbers() {
//                System.out.println("Original numbers are " + phoneNumber1 + " and " + phoneNumber2);
//            }
        }

        PhoneNumber myNumber1 = new PhoneNumber(phoneNumber1);
        PhoneNumber myNumber2 = new PhoneNumber(phoneNumber2);
        
        // Valid in JDK 8 and later:

//        myNumber1.printOriginalNumbers();

        if (myNumber1.getNumber() == null) 
            System.out.println("First number is invalid");
        else
            System.out.println("First number is " + myNumber1.getNumber());
        if (myNumber2.getNumber() == null)
            System.out.println("Second number is invalid");
        else
            System.out.println("Second number is " + myNumber2.getNumber());

    }

    public static void main(String... args) {
        validatePhoneNumber("123-456-7890", "456-7890");
    }
}
```

è¿™ä¸ªç¤ºä¾‹é€šè¿‡ç§»é™¤ç”µè¯å·ç ä¸­çš„æ‰€æœ‰éæ•°å­—å­—ç¬¦ï¼Œç„¶åæ£€æŸ¥ç”µè¯å·ç æ˜¯å¦æ°å¥½åŒ…å«åä¸ªæ•°å­—ï¼ˆè¿™æ˜¯åŒ—ç¾ç”µè¯å·ç çš„æ ‡å‡†é•¿åº¦ï¼‰æ¥éªŒè¯ç”µè¯å·ç çš„æœ‰æ•ˆæ€§ã€‚æ¥ä¸‹æ¥æ˜¯ç¤ºä¾‹çš„è¾“å‡ºï¼š

```
First number is 1234567890
Second number is invalid
```

### è®¿é—®å¤–éƒ¨ç±»æˆå‘˜ {#accessing-members-of-an-enclosing-class}

<strong style="color:#ae3520;">å±€éƒ¨ç±»å¯ä»¥è®¿é—®å…¶å¤–éƒ¨ç±»ä¸­çš„æˆå‘˜</strong>ã€‚åœ¨å‰é¢çš„ç¤ºä¾‹ä¸­ï¼Œ`PhoneNumber` æ„é€ å‡½æ•°è®¿é—®äº† `LocalClassExample` ç±»çš„æˆå‘˜ `regularExpression`ã€‚

æ­¤å¤–ï¼Œ<strong style="color:#ae3520;">å±€éƒ¨ç±»å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡</strong>ã€‚ä½†æ˜¯ï¼Œ<strong style="color:#ae3520;">å±€éƒ¨ç±»åªèƒ½è®¿é—®è¢«å£°æ˜ä¸º `final` çš„å±€éƒ¨å˜é‡</strong>ã€‚å½“å±€éƒ¨ç±»è®¿é—®å¤–å›´å—ä¸­çš„å±€éƒ¨å˜é‡æˆ–å‚æ•°æ—¶ï¼Œå®ƒå®é™…ä¸Šæ•è·äº†è¿™ä¸ªå˜é‡æˆ–å‚æ•°ã€‚ä¾‹å¦‚ï¼Œ`PhoneNumber` æ„é€ å‡½æ•°å¯ä»¥è®¿é—®å±€éƒ¨å˜é‡ `numberLength`ï¼Œå› ä¸ºå®ƒè¢«å£°æ˜ä¸º `final`ï¼›`numberLength` æ˜¯ä¸€ä¸ªè¢«æ•è·çš„å˜é‡ã€‚

<strong style="color:#ae3520;">ä» Java SE 8 å¼€å§‹ï¼Œå±€éƒ¨ç±»å¯ä»¥è®¿é—®å¤–å›´å—ä¸­çš„å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼Œåªè¦å®ƒä»¬æ˜¯ `final` æˆ–è€…å®é™…ä¸Šæ˜¯ `final` çš„ã€‚ä¸€ä¸ªå˜é‡æˆ–å‚æ•°å¦‚æœåœ¨åˆå§‹åŒ–åå…¶å€¼ä»æœªè¢«æ”¹å˜ï¼Œåˆ™è¢«è®¤ä¸ºæ˜¯å®é™…ä¸Šæ˜¯ `final` çš„</strong>ã€‚ä¾‹å¦‚ï¼Œå‡è®¾å˜é‡ `numberLength` æ²¡æœ‰è¢«å£°æ˜ä¸º `final`ï¼Œå¹¶ä¸”ä½ åœ¨ `PhoneNumber` æ„é€ å‡½æ•°ä¸­æ·»åŠ äº†é«˜äº®æ˜¾ç¤ºçš„èµ‹å€¼è¯­å¥ï¼Œä»¥å°†æœ‰æ•ˆç”µè¯å·ç çš„é•¿åº¦æ”¹ä¸º 7 ä½ã€‚

```java {2}
PhoneNumber(String phoneNumber) {
    numberLength = 7;
    String currentNumber = phoneNumber.replaceAll(regularExpression, "");
    if (currentNumber.length() == numberLength)
        formattedPhoneNumber = currentNumber;
    else
        formattedPhoneNumber = null;
}
```

ç”±äºè¿™ä¸ªèµ‹å€¼è¯­å¥ï¼Œå˜é‡ `numberLength` ä¸å†å®é™…ä¸Šæ˜¯ `final` çš„ã€‚å› æ­¤ï¼ŒJava ç¼–è¯‘å™¨ä¼šç”Ÿæˆä¸€ä¸ªç±»ä¼¼çš„é”™è¯¯æ¶ˆæ¯ï¼Œå¦‚ "local variables referenced from an inner class must be final or effectively final"ï¼Œå…¶ä¸­å†…éƒ¨ç±» `PhoneNumber` å°è¯•è®¿é—® `numberLength` å˜é‡ã€‚

```java
if (currentNumber.length() == numberLength)
```

ä» Java SE 8 å¼€å§‹ï¼Œå¦‚æœä½ <strong style="color:#ae3520;">åœ¨æ–¹æ³•ä¸­å£°æ˜å±€éƒ¨ç±»ï¼Œå®ƒå¯ä»¥è®¿é—®è¯¥æ–¹æ³•çš„å‚æ•°</strong>ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥åœ¨ `PhoneNumber` å±€éƒ¨ç±»ä¸­å®šä¹‰ä»¥ä¸‹æ–¹æ³•ï¼š

```java
public void printOriginalNumbers() {
    System.out.println("Original numbers are " + phoneNumber1 + " and " + phoneNumber2);
}
```

`printOriginalNumbers` æ–¹æ³•å¯ä»¥è®¿é—® `validatePhoneNumber` æ–¹æ³•ä¸­çš„ `phoneNumber1` å’Œ `phoneNumber2` å‚æ•°ã€‚

### å±€éƒ¨ç±»ç›¸ä¼¼äºå†…éƒ¨ç±»

<strong style="color:#ae3520;">å±€éƒ¨ç±»ä¸å†…éƒ¨ç±»å¾ˆç›¸ä¼¼ï¼Œå› ä¸ºå®ƒä»¬éƒ½ä¸èƒ½å®šä¹‰æˆ–å£°æ˜ä»»ä½•é™æ€æˆå‘˜ã€‚å½“ä½ åœ¨é™æ€æ–¹æ³•  `validatePhoneNumber`Â ä¸­å®šä¹‰å±€éƒ¨ç±»  `PhoneNumber` æ—¶ï¼Œè¯¥å±€éƒ¨ç±»å°±åªèƒ½è®¿é—®å¤–éƒ¨ç±»ä¸­çš„é™æ€æˆå‘˜</strong>ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æ²¡æœ‰å°†å¤–éƒ¨ç±»ä¸­çš„æˆå‘˜å˜é‡ `regularExpression` å®šä¹‰ä¸ºé™æ€çš„ï¼Œé‚£ä¹ˆ Java ç¼–è¯‘å™¨ç¼–è¯‘å™¨å°±ä¼šæŠ¥é”™ï¼Œå‘Šè¯‰ä½ ä¸èƒ½åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨éé™æ€å˜é‡ã€‚

<strong style="color:#ae3520;">å±€éƒ¨ç±»ä¹‹æ‰€ä»¥æ˜¯éé™æ€çš„ï¼Œæ˜¯å› ä¸ºå®ƒä»¬èƒ½å¤Ÿåœ¨æ–¹æ³•æˆ–ä»£ç å—å†…éƒ¨è®¿é—®åˆ°å¤–éƒ¨ç±»çš„å®ä¾‹æˆå‘˜ï¼ˆå¦‚å˜é‡å’Œæ–¹æ³•ï¼‰</strong>ã€‚æ­£å› å¦‚æ­¤ï¼Œ<strong style="color:#ae3520;">å±€éƒ¨ç±»ä¸­ä¸èƒ½åŒ…å«é™æ€æˆå‘˜ï¼ˆå¦‚é™æ€å˜é‡æˆ–é™æ€æ–¹æ³•ï¼‰</strong>ï¼Œå› ä¸ºé™æ€æˆå‘˜ä¸éœ€è¦ä¾èµ–äºç‰¹å®šçš„å®ä¾‹ã€‚

<strong style="color:#ae3520;">åœ¨ Java ä¸­ï¼Œä½ ä¸èƒ½åœ¨ä¸€ä¸ªæ–¹æ³•æˆ–ä»£ç å—å†…éƒ¨å®šä¹‰æ¥å£ï¼Œå› ä¸ºæ¥å£æœ¬è´¨ä¸Šæ˜¯é™æ€çš„ã€‚</strong>å‡è®¾ä½ è¯•å›¾åœ¨æ–¹æ³• `greetInEnglish` ä¸­å®šä¹‰ä¸€ä¸ªæ¥å£ `HelloThere`ï¼Œè¿™æ ·åšä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ã€‚

```java
public void greetInEnglish() {
    interface HelloThere {
        public void greet();
    }
    class EnglishHelloThere implements HelloThere {
        public void greet() {
            System.out.println("Hello " + name);
        }
    }
    HelloThere myGreeting = new EnglishHelloThere();
    myGreeting.greet();
}
```

<strong style="color:#ae3520;">åœ¨å±€éƒ¨ç±»ä¸­ï¼Œä½ ä¸èƒ½å£°æ˜[é™æ€åˆå§‹åŒ–å—](#é™æ€åˆå§‹åŒ–å—)æˆ–æˆå‘˜æ¥å£ï¼ˆåœ¨ç±»å†…éƒ¨å®šä¹‰çš„æ¥å£ï¼‰</strong>ã€‚å‡è®¾ä½ è¯•å›¾åœ¨ `EnglishGoodbye` å±€éƒ¨ç±»ä¸­å®šä¹‰ä¸€ä¸ª `sayGoodbye` é™æ€æ–¹æ³•ï¼Œè¿™æ ·åšä¼šå¯¼è‡´ç¼–è¯‘é”™è¯¯ï¼š'static' å…³é”®å­—åªèƒ½ç”¨æ¥å£°æ˜å¸¸é‡ã€‚

```java
public void sayGoodbyeInEnglish() {
    class EnglishGoodbye {
        public static void sayGoodbye() {
            System.out.println("Bye bye");
        }
    }
    EnglishGoodbye.sayGoodbye();
}
```

<strong style="color:#ae3520;">å±€éƒ¨ç±»å¯ä»¥æ‹¥æœ‰é™æ€æˆå‘˜ï¼Œä½†æ˜¯è¿™äº›é™æ€æˆå‘˜å¿…é¡»æ˜¯*å¸¸é‡*</strong>ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå®ƒä»¬å¿…é¡»æ˜¯åŸºæœ¬ç±»å‹æˆ– `String` ç±»å‹ï¼Œå¹¶ä¸”éœ€è¦è¢«å£°æ˜ä¸º `final`ï¼ŒåŒæ—¶ä½¿ç”¨ç¼–è¯‘æ—¶å¸¸é‡è¡¨è¾¾å¼è¿›è¡Œåˆå§‹åŒ–ã€‚ç¼–è¯‘æ—¶å¸¸é‡è¡¨è¾¾å¼æ˜¯æŒ‡é‚£äº›å¯ä»¥åœ¨ç¼–è¯‘æ—¶å°±ç¡®å®šå…¶å€¼çš„è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ç®€å•çš„å­—ç¬¦ä¸²æˆ–ç®—æœ¯è¿ç®—ã€‚ä¸‹é¢çš„ä»£ç ç‰‡æ®µå¯ä»¥ç¼–è¯‘ï¼Œå› ä¸ºé™æ€æˆå‘˜ `EnglishGoodbye.farewell` æ˜¯ä¸€ä¸ªå¸¸é‡ï¼š

```java
public void sayGoodbyeInEnglish() {
    class EnglishGoodbye {
        public static final String farewell = "Bye bye";
        public void sayGoodbye() {
            System.out.println(farewell);
        }
    }
    EnglishGoodbye myEnglishGoodbye = new EnglishGoodbye();
    myEnglishGoodbye.sayGoodbye();
}
```

## åŒ¿åç±» {#anonymousclasses}

åŒ¿åç±»å¯ä»¥å¸®åŠ©ä½ è®©ä»£ç å˜å¾—æ›´åŠ ç®€æ´ã€‚<strong style="color:#ae3520;">å½“ä½ éœ€è¦å®šä¹‰ä¸€ä¸ªç±»å¹¶ç«‹å³åˆ›å»ºå®ƒçš„å®ä¾‹æ—¶ï¼Œå¯ä»¥ä½¿ç”¨åŒ¿åç±»</strong>ã€‚å®ƒä»¬çš„<strong style="color:#ae3520;">å·¥ä½œæ–¹å¼ä¸å±€éƒ¨ç±»ç±»ä¼¼ï¼Œä½†æ˜¯ä¸éœ€è¦ç»™è¿™ä¸ªç±»èµ·åå­—</strong>ã€‚å¦‚æœä½ åªéœ€è¦åœ¨ä¸€ä¸ªåœ°æ–¹ä½¿ç”¨è¿™ä¸ªç±»ï¼Œå¹¶ä¸”ä¸æƒ³ä¸ºå®ƒèµ·åå­—ï¼Œé‚£ä¹ˆä½¿ç”¨åŒ¿åç±»æ˜¯ä¸€ä¸ªå¥½çš„é€‰æ‹©ã€‚

### å£°æ˜åŒ¿åç±»

å±€éƒ¨ç±»æ˜¯ä¸€ç§å®Œæ•´çš„ç±»å£°æ˜ï¼Œé€šå¸¸åœ¨æ–¹æ³•æˆ–ä»£ç å—å†…éƒ¨å®šä¹‰ï¼Œè€Œ<strong style="color:#ae3520;">åŒ¿åç±»æ˜¯ä¸€ç§ç‰¹æ®Šçš„ç±»ï¼Œå®ƒæ²¡æœ‰åå­—ï¼Œç›´æ¥ä½œä¸ºè¡¨è¾¾å¼çš„ä¸€éƒ¨åˆ†å‡ºç°ã€‚å½“ä½ åªéœ€è¦ä½¿ç”¨ä¸€æ¬¡ç±»æ—¶ï¼Œä½¿ç”¨åŒ¿åç±»å¯ä»¥è®©ä»£ç æ›´ç®€æ´</strong>ã€‚

ä¸‹é¢çš„ `HelloWorldAnonymousClasses` ç¤ºä¾‹åœ¨åˆå§‹åŒ–å±€éƒ¨å˜é‡ `frenchGreeting` å’Œ `spanishGreeting` æ—¶ä½¿ç”¨äº†åŒ¿åç±»ï¼Œè€Œåœ¨åˆå§‹åŒ–å˜é‡ `englishGreeting` æ—¶ä½¿ç”¨äº†å±€éƒ¨ç±»ã€‚

```java
public class HelloWorldAnonymousClasses {

    public void sayHello() {

        class EnglishGreeting implements HelloWorld {
            String name = "world";

            @Override
            public void greet() {
                greetSomeone("world");
            }

            @Override
            public void greetSomeone(String someone) {
                name = someone;
                System.out.println("Hello " + name);
            }
        }

        HelloWorld englishGreeting = new EnglishGreeting();

        HelloWorld frenchGreeting = new HelloWorld() {
            String name = "tout le monde";

            @Override
            public void greet() {
                greetSomeone("tout le monde");
            }

            @Override
            public void greetSomeone(String someone) {
                name = someone;
                System.out.println("Salut " + name);
            }
        };

        HelloWorld spanishGreeting = new HelloWorld() {
            String name = "mundo";

            @Override
            public void greet() {
                greetSomeone("mundo");
            }

            @Override
            public void greetSomeone(String someone) {
                name = someone;
                System.out.println("Hola, " + name);
            }
        };
        englishGreeting.greet();
        frenchGreeting.greetSomeone("Fred");
        spanishGreeting.greet();
    }

    public static void main(String... args) {
        HelloWorldAnonymousClasses myApp = new HelloWorldAnonymousClasses();
        myApp.sayHello();
    }

    interface HelloWorld {
        void greet();

        void greetSomeone(String someone);
    }
}
```

### åŒ¿åç±»çš„è¯­æ³•

æ­£å¦‚ä¹‹å‰æ‰€æåˆ°çš„ï¼ŒåŒ¿åç±»æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ã€‚<strong style="color:#ae3520;">åŒ¿åç±»è¡¨è¾¾å¼çš„è¯­æ³•çœ‹èµ·æ¥åƒæ˜¯åœ¨è°ƒç”¨ä¸€ä¸ªæ„é€ å‡½æ•°ï¼Œä½†æ˜¯åœ¨è¿™ä¸ªæ„é€ å‡½æ•°è°ƒç”¨ä¸­ï¼Œä½ å®é™…ä¸Šæ˜¯åœ¨å®šä¹‰ä¸€ä¸ªæ–°çš„ç±»ï¼Œå¹¶ç«‹å³åˆ›å»ºå®ƒçš„å®ä¾‹</strong>ã€‚è¿™ä¸ªç±»å®šä¹‰è¢«åŒ…å«åœ¨ä¸€ä¸ªä»£ç å—ä¸­ã€‚

è€ƒè™‘ `frenchGreeting` å¯¹è±¡çš„å®ä¾‹åŒ–ï¼š

```java
HelloWorld frenchGreeting = new HelloWorld() {
    String name = "tout le monde";
    public void greet() {
        greetSomeone("tout le monde");
    }
    public void greetSomeone(String someone) {
        name = someone;
        System.out.println("Salut " + name);
    }
};
```

åŒ¿åç±»è¡¨è¾¾å¼ç”±ä»¥ä¸‹å‡ ä¸ªéƒ¨åˆ†ç»„æˆï¼š

- **å…³é”®å­— `new`**ï¼šè¡¨æ˜è¦åˆ›å»ºä¸€ä¸ªæ–°çš„å¯¹è±¡å®ä¾‹ã€‚
- **æ¥å£åæˆ–åŸºç±»å**ï¼šéœ€è¦æŒ‡å®šè¦å®ç°çš„æ¥å£æˆ–è¦ç»§æ‰¿çš„ç±»çš„åç§°ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ¿åç±»å®ç°äº† `HelloWorld` æ¥å£ã€‚
- **æ„é€ å‡½æ•°å‚æ•°**ï¼šè¡¨è¾¾å¼ä¸­çš„æ‹¬å·ç”¨äºåŒ…å«æ„é€ å‡½æ•°çš„å‚æ•°ã€‚å¦‚æœåŒ¿åç±»ç»§æ‰¿çš„æ˜¯ä¸€ä¸ªå…·æœ‰æ„é€ å‡½æ•°çš„ç±»ï¼Œåˆ™éœ€è¦æä¾›ç›¸åº”çš„å‚æ•°ã€‚ä½†æ˜¯ï¼Œå¦‚æœåŒ¿åç±»å®ç°çš„æ˜¯ä¸€ä¸ªæ¥å£ï¼Œå› ä¸ºæ¥å£æ²¡æœ‰æ„é€ å‡½æ•°ï¼Œæ‰€ä»¥åªéœ€è¦ä½¿ç”¨ä¸€å¯¹ç©ºæ‹¬å·ï¼Œå°±åƒè¿™ä¸ªä¾‹å­ä¸­é‚£æ ·ã€‚
- **ç±»ä½“**ï¼šåœ¨è¡¨è¾¾å¼çš„å¤§æ‹¬å· `{}` å†…éƒ¨ï¼Œå®šä¹‰äº†åŒ¿åç±»çš„ä¸»ä½“ã€‚åœ¨è¿™ä¸ªä¸»ä½“ä¸­ï¼Œä½ å¯ä»¥å£°æ˜æ–¹æ³•ï¼Œä½†ä¸èƒ½å£°æ˜åƒ `System.out.println()` è¿™æ ·çš„æ™®é€šè¯­å¥ã€‚

åŒ¿åç±»å®šä¹‰ä½œä¸ºä¸€ä¸ªè¡¨è¾¾å¼ï¼Œé€šå¸¸ä½œä¸ºæŸä¸ªè¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼ŒåŒ¿åç±»è¡¨è¾¾å¼æ˜¯å®ä¾‹åŒ– `frenchGreeting` å¯¹è±¡çš„è¯­å¥çš„ä¸€éƒ¨åˆ†ã€‚å› ä¸ºè¿™æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¯­å¥ï¼Œæ‰€ä»¥åœ¨é—­åˆçš„å¤§æ‹¬å·åé¢éœ€è¦åŠ ä¸Šåˆ†å·æ¥ç»“æŸè¿™ä¸ªè¯­å¥ã€‚

### è®¿é—®å°é—­ä½œç”¨åŸŸä¸­çš„å±€éƒ¨å˜é‡ä»¥åŠå£°æ˜å’Œè®¿é—®åŒ¿åç±»çš„æˆå‘˜

åƒå±€éƒ¨ç±»ä¸€æ ·ï¼ŒåŒ¿åç±»ä¹Ÿå¯ä»¥[æ•è·å˜é‡](#accessing-members-of-an-enclosing-class)ï¼›å®ƒä»¬å¯¹å°é—­ä½œç”¨åŸŸï¼ˆæ–¹æ³•æˆ–ä»£ç å—ï¼‰ä¸­çš„å±€éƒ¨å˜é‡å…·æœ‰ç›¸åŒçš„è®¿é—®æƒé™ï¼š

- <strong style="color:#ae3520;">åŒ¿åç±»å¯ä»¥è®¿é—®å®šä¹‰å®ƒçš„ç±»ï¼ˆå°é—­ç±»ï¼Œå³å¤–éƒ¨ç±»ï¼‰ä¸­çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•</strong>ã€‚
- <strong style="color:#ae3520;">åœ¨åŒ¿åç±»ä¸­ï¼Œä½ ä¸èƒ½ç›´æ¥è®¿é—®å°é—­ä½œç”¨åŸŸï¼ˆæ–¹æ³•æˆ–ä»£ç å—ï¼‰ä¸­çš„å±€éƒ¨å˜é‡ï¼Œé™¤éè¿™äº›å˜é‡è¢«å£°æ˜ä¸º `final` æˆ–è€…å®é™…ä¸Šæ˜¯ `final` çš„</strong>ã€‚
- å°±åƒåµŒå¥—ç±»ä¸€æ ·ï¼Œ<strong style="color:#ae3520;">åœ¨åŒ¿åç±»ä¸­å£°æ˜ä¸€ä¸ªç±»å‹ï¼ˆæ¯”å¦‚å˜é‡ï¼‰ä¼šé®è”½ï¼ˆæˆ–è¦†ç›–ï¼‰åœ¨å¤–éƒ¨ä½œç”¨åŸŸä¸­åŒåçš„å…¶ä»–å£°æ˜</strong>ã€‚è¯·å‚é˜…[Shadowing<span style="font-size:13px;color:#909399;"> - é®è”½/è¦†ç›–</span>](#shadowing)äº†è§£æ›´å¤šä¿¡æ¯ã€‚

<strong style="color:#ae3520;">åŒ¿åç±»ä¸­å®šä¹‰çš„æˆå‘˜å˜é‡å’Œæ–¹æ³•éœ€è¦éµå¾ªä¸å±€éƒ¨ç±»ç›¸åŒçš„è§„åˆ™</strong>ï¼š

- <strong style="color:#ae3520;">åœ¨åŒ¿åç±»ä¸­ï¼Œä¸èƒ½å£°æ˜[é™æ€åˆå§‹åŒ–å—](#é™æ€åˆå§‹åŒ–å—)å’Œæˆå‘˜æ¥å£ï¼ˆåœ¨ç±»å†…éƒ¨å®šä¹‰çš„æ¥å£ï¼‰</strong>ã€‚
- <strong style="color:#ae3520;">åŒ¿åç±»å¯ä»¥æœ‰é™æ€æˆå‘˜ï¼Œä½†è¿™äº›æˆå‘˜å¿…é¡»æ˜¯å¸¸é‡</strong>ï¼ˆ`final` ç±»å‹çš„å˜é‡ï¼Œè¿™æ„å‘³ç€ä¸€æ—¦ç»™è¿™äº›å˜é‡èµ‹å€¼åï¼Œå°±ä¸èƒ½å†ä¿®æ”¹å®ƒä»¬çš„å€¼ï¼‰ã€‚

è¯·æ³¨æ„ï¼Œåœ¨åŒ¿åç±»ä¸­å¯ä»¥å£°æ˜ä»¥ä¸‹å†…å®¹ï¼š

- å­—æ®µ
- é¢å¤–çš„æ–¹æ³•ï¼ˆå³ä½¿è¿™äº›æ–¹æ³•ä¸å®ç°è¶…ç±»ï¼ˆæˆ–æ¥å£ï¼‰ä¸­å®šä¹‰çš„æ–¹æ³•ï¼‰
- [å®ä¾‹åˆå§‹åŒ–å—](#å®ä¾‹åˆå§‹åŒ–å—)
- å±€éƒ¨ç±»

ç„¶è€Œï¼Œ<strong style="color:#ae3520;">åœ¨åŒ¿åç±»ä¸­ä¸èƒ½å£°æ˜æ„é€ å‡½æ•°</strong>ã€‚

### åŒ¿åç±»çš„ä¾‹å­

åŒ¿åç±»ç»å¸¸è¢«ç”¨äºå›¾å½¢ç”¨æˆ·ç•Œé¢ï¼ˆGUIï¼‰åº”ç”¨ç¨‹åºä¸­ã€‚

å¦‚ JavaFX ç¤ºä¾‹ [HelloWorld.java](https://docs.oracle.com/javase/8/javafx/get-started-tutorial/hello_world.htm) æ‰€ç¤ºï¼Œè¿™ä¸ªç¤ºä¾‹åˆ›å»ºäº†ä¸€ä¸ªåŒ…å« Say 'Hello World' æŒ‰é’®çš„çª—å£ã€‚åŒ¿åç±»è¡¨è¾¾å¼è¢«é«˜äº®æ˜¾ç¤ºï¼š

```java {18-24}
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;
 
public class HelloWorld extends Application {
    public static void main(String[] args) {
        launch(args);
    }
    
    @Override
    public void start(Stage primaryStage) {
        primaryStage.setTitle("Hello World!");
        Button btn = new Button();
        btn.setText("Say 'Hello World'");
        btn.setOnAction(new EventHandler<ActionEvent>() {
 
            @Override
            public void handle(ActionEvent event) {
                System.out.println("Hello World!");
            }
        });
        
        StackPane root = new StackPane();
        root.getChildren().add(btn);
        primaryStage.setScene(new Scene(root, 300, 250));
        primaryStage.show();
    }
}
```

åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ–¹æ³•è°ƒç”¨ `btn.setOnAction` æŒ‡å®šäº†å½“ä½ é€‰æ‹© â€˜Say 'Hello World'' æŒ‰é’®æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚è¿™ä¸ªæ–¹æ³•éœ€è¦ä¸€ä¸ª `EventHandler<ActionEvent>` ç±»å‹çš„å¯¹è±¡ã€‚`EventHandler<ActionEvent>` æ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³• `handle`ã€‚è¯¥ç¤ºä¾‹æ²¡æœ‰ä½¿ç”¨ä¸€ä¸ªæ–°ç±»æ¥å®ç°è¿™ä¸ªæ–¹æ³•ï¼Œè€Œæ˜¯ä½¿ç”¨äº†ä¸€ä¸ªåŒ¿åç±»è¡¨è¾¾å¼ã€‚è¯·æ³¨æ„ï¼Œè¿™ä¸ªè¡¨è¾¾å¼æ­£æ˜¯ä¼ é€’ç»™ `btn.setOnAction` æ–¹æ³•çš„å‚æ•°ã€‚

å› ä¸º `EventHandler<ActionEvent>` æ¥å£åªåŒ…å«ä¸€ä¸ªæ–¹æ³•ï¼Œæ‰€ä»¥ä½ å¯ä»¥ä½¿ç”¨ lambda è¡¨è¾¾å¼æ¥ä»£æ›¿åŒ¿åç±»è¡¨è¾¾å¼ã€‚æ›´å¤šä¿¡æ¯è¯·å‚è§ [Lambda è¡¨è¾¾å¼](https://docs.oracle.com/javase/tutorial/java/javaOO/lambdaexpressions.html)éƒ¨åˆ†ã€‚

åŒ¿åç±»éå¸¸é€‚åˆå®ç°åŒ…å«ä¸¤ä¸ªæˆ–æ›´å¤šæ–¹æ³•çš„æ¥å£ã€‚ä»¥ä¸‹ JavaFX ç¤ºä¾‹æ¥è‡ª â€œ[UI æ§ä»¶çš„å®šåˆ¶](https://docs.oracle.com/javase/8/javafx/user-interface-tutorial/custom.htm)â€ éƒ¨åˆ†ã€‚é«˜äº®éƒ¨åˆ†çš„ä»£ç åˆ›å»ºäº†ä¸€ä¸ªåªæ¥å—æ•°å­—å€¼çš„æ–‡æœ¬æ¡†ã€‚å®ƒé€šè¿‡åŒ¿åç±»çš„æ–¹å¼é‡æ–°å®šä¹‰äº† `TextField` ç±»çš„é»˜è®¤å®ç°ï¼Œè¦†ç›–äº†ä» `TextInputControl` ç±»ç»§æ‰¿çš„ `replaceText` å’Œ `replaceSelection` æ–¹æ³•ã€‚

```java {33-48}
import javafx.application.Application;
import javafx.event.ActionEvent;
import javafx.event.EventHandler;
import javafx.geometry.Insets;
import javafx.scene.Group;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

public class CustomTextFieldSample extends Application {

    final static Label label = new Label();

    @Override
    public void start(Stage stage) {
        Group root = new Group();
        Scene scene = new Scene(root, 300, 150);
        stage.setScene(scene);
        stage.setTitle("Text Field Sample");

        GridPane grid = new GridPane();
        grid.setPadding(new Insets(10, 10, 10, 10));
        grid.setVgap(5);
        grid.setHgap(5);

        scene.setRoot(grid);
        final Label dollar = new Label("$");
        GridPane.setConstraints(dollar, 0, 0);
        grid.getChildren().add(dollar);

        final TextField sum = new TextField() {
            @Override
            public void replaceText(int start, int end, String text) {
                if (!text.matches("[a-z, A-Z]")) {
                    super.replaceText(start, end, text);                     
                }
                label.setText("Enter a numeric value");
            }

            @Override
            public void replaceSelection(String text) {
                if (!text.matches("[a-z, A-Z]")) {
                    super.replaceSelection(text);
                }
            }
        };

        sum.setPromptText("Enter the total");
        sum.setPrefColumnCount(10);
        GridPane.setConstraints(sum, 1, 0);
        grid.getChildren().add(sum);

        Button submit = new Button("Submit");
        GridPane.setConstraints(submit, 2, 0);
        grid.getChildren().add(submit);

        submit.setOnAction(new EventHandler<ActionEvent>() {
            @Override
            public void handle(ActionEvent e) {
                label.setText(null);
            }
        });

        GridPane.setConstraints(label, 0, 1);
        GridPane.setColumnSpan(label, 3);
        grid.getChildren().add(label);

        scene.setRoot(grid);
        stage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
```

## é—®é¢˜ä¸ç»ƒä¹ 

### é—®é¢˜

1. ç¨‹åº [Problem.java](https://docs.oracle.com/javase/tutorial/java/javaOO/QandE/Problem.java) æ— æ³•ç¼–è¯‘ã€‚ä½ éœ€è¦åšä»€ä¹ˆæ‰èƒ½è®©å®ƒç¼–è¯‘ï¼Ÿä¸ºä»€ä¹ˆï¼Ÿ

   **Answer**: åˆ é™¤ `Inner` ç±»å£°æ˜å‰é¢çš„ `static`ï¼Œå› ä¸ºé™æ€å†…éƒ¨ç±»ä¸èƒ½ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„å®ä¾‹å­—æ®µã€‚è¯·å‚è§ [ProblemSolved.java](https://docs.oracle.com/javase/tutorial/java/javaOO/QandE/ProblemSolved.java)ã€‚

2. ä½¿ç”¨ `javax.swing` åŒ…ä¸­çš„ `Box` ç±»çš„ Java API æ–‡æ¡£æ¥å¸®åŠ©ä½ å›ç­”ä»¥ä¸‹é—®é¢˜ã€‚

   1. Box ç±»zçº¢å®šä¹‰äº†å“ªä¸ªé™æ€åµŒå¥—ç±»ï¼Ÿ

      **Answer**: `Box.Filler`ã€‚

   2. Box ç±»ä¸­å®šä¹‰äº†å“ªä¸ªå†…éƒ¨ç±»ï¼Ÿ

      **Answer**: `Box.AccessibleBox`ã€‚

   3. Box ç±»ä¸­å†…éƒ¨ç±»çš„è¶…ç±»æ˜¯ä»€ä¹ˆï¼Ÿ

      **Answer**: `Container.AccessibleAWTContainer`ã€‚

   4. Box ç±»ä¸­çš„å“ªäº›åµŒå¥—ç±»å¯ä»¥åœ¨ä»»ä½•ç±»ä¸­ä½¿ç”¨ï¼Ÿ

      **Answer**: `Box.Filler`ã€‚

   5. å¦‚ä½•åˆ›å»º `Box` ç±»çš„ `Filler` ç±»çš„å®ä¾‹ï¼Ÿ

      **Answer**: `new Box.Filler(minDimension, prefDimension, maxDimension);`

### ç»ƒä¹ 

1. è·å– [Class1.java](https://docs.oracle.com/javase/tutorial/java/javaOO/QandE/Class1.java) æ–‡ä»¶ï¼Œç„¶åç¼–è¯‘å¹¶è¿è¡Œ `Class1`ã€‚è¾“å‡ºæ˜¯ä»€ä¹ˆï¼Ÿ

   ```
   InnerClass1: getString invoked.
   InnerClass1: getAnotherString invoked.
   ```

2. ä»¥ä¸‹ç»ƒä¹ æ¶‰åŠä¿®æ”¹ [DataStructure.java](https://docs.oracle.com/javase/tutorial/java/javaOO/examples/DataStructure.java) ç±»ï¼Œè¿™ä¸ªç±»åœ¨[å†…éƒ¨ç±»ç¤ºä¾‹](#ä¸¾ä¸ªæ —å­)ä¸€èŠ‚ä¸­æœ‰è®¨è®ºã€‚

   1. å®šä¹‰ä¸€ä¸ªåä¸º `print` çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª `DataStructureIterator` ç±»å‹çš„å‚æ•° `iterator`ã€‚ä½¿ç”¨ `EvenIterator` ç±»çš„ä¸€ä¸ªå®ä¾‹è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä»¥ä¾¿å®ƒæ‰§è¡Œä¸ `printEven` æ–¹æ³•ç›¸åŒçš„åŠŸèƒ½ã€‚

      æç¤ºï¼šå¦‚æœä½ åœ¨ `main` æ–¹æ³•ä¸­æŒ‡å®šäº†ä»¥ä¸‹è¯­å¥ï¼Œå®ƒä»¬å°†æ— æ³•ç¼–è¯‘ï¼š

      ```java
      DataStructure ds = new DataStructure();
      ds.print(new EvenIterator());
      ```

      å½“ç¼–è¯‘å™¨é‡åˆ°è¡¨è¾¾å¼ `new EvenIterator()` æ—¶ï¼Œå®ƒä¼šç”Ÿæˆé”™è¯¯æ¶ˆæ¯ 'éé™æ€å˜é‡ this ä¸èƒ½åœ¨é™æ€ä¸Šä¸‹æ–‡ä¸­å¼•ç”¨'ã€‚`EvenIterator` ç±»æ˜¯ä¸€ä¸ªå†…éƒ¨çš„éé™æ€ç±»ã€‚è¿™æ„å‘³ç€ä½ åªèƒ½åœ¨ `DataStructure` ç±»çš„å®ä¾‹å†…éƒ¨åˆ›å»º `EvenIterator` ç±»çš„å®ä¾‹ã€‚

      ä½ å¯ä»¥åœ¨ `DataStructure` ç±»ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œè¯¥æ–¹æ³•åˆ›å»ºå¹¶è¿”å›ä¸€ä¸ªæ–°çš„ `EvenIterator` ç±»çš„å®ä¾‹ã€‚

   2. è°ƒç”¨ `print(DataStructureIterator iterator)` æ–¹æ³•ï¼Œä½¿å…¶æ‰“å°å…·æœ‰å¥‡æ•°ç´¢å¼•å€¼çš„å…ƒç´ ã€‚ä½¿ç”¨åŒ¿åç±»ä½œä¸ºæ–¹æ³•çš„å‚æ•°ï¼Œè€Œä¸æ˜¯ `DataStructureIterator` æ¥å£çš„å®ä¾‹ã€‚

      æç¤ºï¼šä½ ä¸èƒ½åœ¨ `DataStructure` ç±»ä¹‹å¤–è®¿é—®ç§æœ‰æˆå‘˜ `SIZE` å’Œ `arrayOfInts`ï¼Œè¿™æ„å‘³ç€ä½ ä¸èƒ½ä» `DataStructure` ç±»ä¹‹å¤–å®šä¹‰çš„åŒ¿åç±»ä¸­è®¿é—®è¿™äº›ç§æœ‰æˆå‘˜ã€‚

      ä½ å¯ä»¥å®šä¹‰æ–¹æ³•æ¥è®¿é—®ç§æœ‰æˆå‘˜ `SIZE` å’Œ `arrayOfInts`ï¼Œç„¶ååœ¨ä½ çš„åŒ¿åç±»ä¸­ä½¿ç”¨è¿™äº›æ–¹æ³•ã€‚

   3. å®šä¹‰ä¸€ä¸ªåä¸º `print` çš„æ–¹æ³•ï¼Œè¯¥æ–¹æ³•æ¥å—ä¸€ä¸ª `Function<Integer, Boolean>` ç±»å‹çš„å‚æ•° `iterator`ï¼Œå¹¶æ‰§è¡Œä¸ `print(DataStructureIterator iterator)` ç›¸åŒçš„åŠŸèƒ½ã€‚ä½¿ç”¨ lambda è¡¨è¾¾å¼è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥æ‰“å°å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„å…ƒç´ ã€‚å†æ¬¡ä½¿ç”¨ lambda è¡¨è¾¾å¼è°ƒç”¨è¿™ä¸ªæ–¹æ³•æ¥æ‰“å°å…·æœ‰å¥‡æ•°ç´¢å¼•å€¼çš„å…ƒç´ ã€‚

      æç¤ºï¼šåœ¨è¿™ä¸ª `print` æ–¹æ³•ä¸­ï¼Œä½ å¯ä»¥ä½¿ç”¨ `for` è¡¨è¾¾å¼éå† `arrayOfInts` æ•°ç»„ä¸­çš„å…ƒç´ ã€‚å¯¹äºæ¯ä¸ªç´¢å¼•å€¼ï¼Œè°ƒç”¨ `function.apply` æ–¹æ³•ã€‚å¦‚æœè¯¥æ–¹æ³•å¯¹æŸä¸ªç‰¹å®šç´¢å¼•å€¼è¿”å› `true`ï¼Œåˆ™æ‰“å°è¯¥ç´¢å¼•å€¼å¤„çš„å…ƒç´ ã€‚

      ä¸ºäº†è°ƒç”¨è¿™ä¸ª `print` æ–¹æ³•æ¥æ‰“å°å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„å…ƒç´ ï¼Œä½ å¯ä»¥æŒ‡å®šä¸€ä¸ªå®ç° `Boolean Function.apply(Integer t)` æ–¹æ³•çš„ lambda è¡¨è¾¾å¼ã€‚è¿™ä¸ª lambda è¡¨è¾¾å¼æ¥å—ä¸€ä¸ª `Integer` å‚æ•°ï¼ˆç´¢å¼•å€¼ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ˆå¦‚æœç´¢å¼•å€¼æ˜¯å¶æ•°åˆ™è¿”å› `Boolean.TRUE`ï¼Œå¦åˆ™è¿”å› `Boolean.FALSE`ï¼‰ã€‚

   4. å®šä¹‰ä¸¤ä¸ªæ–¹æ³•ï¼Œä½¿å¾—ä»¥ä¸‹è¯­å¥èƒ½å¤Ÿæ‰“å°å…·æœ‰å¶æ•°ç´¢å¼•å€¼çš„å…ƒç´ ï¼Œç„¶åæ‰“å°å…·æœ‰å¥‡æ•°ç´¢å¼•å€¼çš„å…ƒç´ ï¼š

      ```java
      DataStructure ds = new DataStructure()
      // ...
      ds.print(DataStructure::isEvenIndex);
      ds.print(DataStructure::isOddIndex);
      ```

      æç¤ºï¼šåœ¨ `DataStructure` ç±»ä¸­åˆ›å»ºä¸¤ä¸ªåä¸º `isEvenIndex` å’Œ `isOddIndex` çš„æ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•å…·æœ‰ä¸æŠ½è±¡æ–¹æ³• `Boolean Function<Integer, Boolean>.apply(Integer t)` ç›¸åŒçš„å‚æ•°åˆ—è¡¨å’Œè¿”å›ç±»å‹ã€‚è¿™æ„å‘³ç€è¿™äº›æ–¹æ³•æ¥å—ä¸€ä¸ª `Integer` å‚æ•°ï¼ˆç´¢å¼•å€¼ï¼‰ï¼Œå¹¶è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ã€‚

   ::: details ç‚¹æˆ‘æŸ¥çœ‹ç­”æ¡ˆ

   å‚è€ƒè‡ª [DataStructure.java](https://docs.oracle.com/javase/tutorial/java/javaOO/QandE/DataStructure.java) æ–‡ä»¶ã€‚

   ```java
   public class DataStructure {
   
       // Create an array
       private final static int SIZE = 15;
       private final int[] arrayOfInts = new int[SIZE];
   
       public DataStructure() {
           // fill the array with ascending integer values
           for (int i = 0; i < SIZE; i++) {
               arrayOfInts[i] = i;
           }
       }
   
       public int getSize() {
           return SIZE;
       }
   
       public int get(int index) {
           return arrayOfInts[index];
       }
   
       public EvenIterator getEvenIterator() {
           return new EvenIterator();
       }
   
       public void print(java.util.function.Function<Integer, Boolean> iterator) {
           for (int i = 0; i < SIZE; i++) {
               if (iterator.apply(i)) {
                   System.out.print(arrayOfInts[i] + " ");
               }
           }
           System.out.println();
       }
   
       public void print(DataStructureIterator iterator) {
           while (iterator.hasNext()) {
               System.out.print(iterator.next() + " ");
           }
           System.out.println();
       }
   
       public void printEven() {
           // Print out values of even indices of the array
           DataStructureIterator iterator = this.new EvenIterator();
           while (iterator.hasNext()) {
               System.out.print(iterator.next() + " ");
           }
           System.out.println();
       }
   
       public static Boolean isEvenIndex(int index) {
           return index % 2 == 0;
       }
   
       public static Boolean isOddIndex(int index) {
           return index % 2 != 0;
       }
   
       public static void main(String[] s) {
   
           // Fill the array with integer values and print out only
           // values of even indices
           DataStructure ds = new DataStructure();
           System.out.println("printEven()");
           ds.printEven();
   
           System.out.println("print(DataStructureIterator) with getEvenIterator");
           ds.print(ds.getEvenIterator());
   
           System.out.println("print(DataStructureIterator) with anonymous class, odd indicies");
           ds.print(new DataStructureIterator() {
               private int nextIndex = 1;
   
               @Override
               public boolean hasNext() {
                   return nextIndex <= ds.getSize() - 1;
               }
   
               @Override
               public Integer next() {
                   final int retValue = ds.get(nextIndex);
                   nextIndex += 2;
                   return retValue;
               }
           });
   
           System.out.println("print(Function) with lambda expressions");
           ds.print((i) -> i % 2 == 0);
           ds.print(i -> i % 2 != 0);
   
           System.out.println("print(Function) with method references");
           ds.print(DataStructure::isEvenIndex);
           ds.print(DataStructure::isOddIndex);
       }
   
       // Inner class implements the DataStructureIterator interface,
       // which extends the Iterator<Integer> interface
   
       interface DataStructureIterator extends java.util.Iterator<Integer> {
       }
   
       private class EvenIterator implements DataStructureIterator {
   
           // Start stepping through the array from the beginning
           private int nextIndex = 0;
   
           @Override
           public boolean hasNext() {
   
               // Check if the current element is the last in the array
               return (nextIndex <= SIZE - 1);
           }
   
           @Override
           public Integer next() {
   
               // Record a value of an even index of the array
               Integer retValue = arrayOfInts[nextIndex];
   
               // Get the next even element
               nextIndex += 2;
               return retValue;
           }
       }
   }
   ```

   

   :::

## æ€»ç»“

### æˆå‘˜å†…éƒ¨ç±»ï¼ˆMember Inner Classï¼‰

- **è®¿é—®å¤–éƒ¨ç±»æˆå‘˜**ï¼šæˆå‘˜å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ã€‚

- **å¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜**ï¼š

  - å¤–éƒ¨ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»ºæˆå‘˜å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ã€‚

  - å¤–éƒ¨å…¶ä»–ç±»è®¿é—®æˆå‘˜å†…éƒ¨ç±»ä¸­çš„æˆå‘˜æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå†åˆ›å»ºæˆå‘˜å†…éƒ¨ç±»å®ä¾‹å¯¹è±¡ï¼Œæœ€åé€šè¿‡æˆå‘˜å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    ```java
    // åˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹
    OuterClass outerInstance = new OuterClass();
    
    // åœ¨å¤–éƒ¨å¯¹è±¡å†…éƒ¨åˆ›å»ºå†…éƒ¨ç±»çš„å®ä¾‹
    OuterClass.InnerClass innerInstance = outerInstance.new InnerClass();
    ```

- **è®¿é—®ä¿®é¥°ç¬¦**ï¼šå¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆç§æœ‰ `private`ã€å…¬æœ‰ `public`ã€å—ä¿æŠ¤ `protected` æˆ–è€…åŒ…ç§æœ‰ `default`ï¼‰ã€‚

- **é™æ€æˆå‘˜é™åˆ¶**ï¼šæˆå‘˜å†…éƒ¨ç±»ä¸èƒ½å®šä¹‰è‡ªå·±çš„é™æ€æˆå‘˜ï¼ˆå¦‚é™æ€åˆå§‹åŒ–å—ã€æˆå‘˜æ¥å£ã€é™æ€æ–¹æ³•å’Œé™æ€å˜é‡ï¼‰ï¼Œå¸¸é‡é™¤å¤–ã€‚

- **ä½œç”¨åŸŸèŒƒå›´**ï¼šåŒå…¶ä»–å¤–éƒ¨ç±»æˆå‘˜ä¸€æ ·ï¼Œæˆå‘˜å†…éƒ¨ç±»çš„ä½œç”¨åŸŸèŒƒå›´ä¸ºæ•´ä¸ªç±»ä½“ã€‚

- **å˜é‡é‡åå¤„ç†**ï¼š

  - å½“å˜é‡é‡åæ—¶ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™ã€‚
  - åœ¨æˆå‘˜å†…éƒ¨ç±»çš„æ–¹æ³•ä¸­æƒ³è®¿é—®æˆå‘˜å†…éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ `this.åŒåæˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚
  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `OuterClass.this.åŒåæˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚

### å±€éƒ¨å†…éƒ¨ç±»ï¼ˆLocal Inner Classï¼‰{#local-inner-class}

- **è®¿é—®å¤–éƒ¨ç±»æˆå‘˜**ï¼šå±€éƒ¨å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»ä¸­çš„æ‰€æœ‰æˆå‘˜ï¼ˆå±æ€§å’Œæ–¹æ³•ï¼‰ï¼ŒåŒ…æ‹¬ç§æœ‰çš„ã€‚
- **è®¿é—®å±€éƒ¨å˜é‡å’Œå‚æ•°**ï¼šå±€éƒ¨å†…éƒ¨ç±»å¯ä»¥è®¿é—®å°é—­ä½œç”¨åŸŸï¼ˆå®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ï¼‰ä¸­çš„å±€éƒ¨å˜é‡å’Œå‚æ•°ï¼Œåªè¦å®ƒä»¬æ˜¯ `final` æˆ–æ˜¯å®é™…ä¸Šæ˜¯ `final` çš„ã€‚
- **å¤–éƒ¨ç±»è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ä¸­çš„æˆå‘˜**ï¼š
  - å¤–éƒ¨ç±»è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ä¸­çš„æˆå‘˜æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»ºå±€éƒ¨å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ï¼Œä¸è¿‡å¿…é¡»åœ¨å…¶ä½œç”¨åŸŸèŒƒå›´ä¹‹å†…ã€‚
  - å¤–éƒ¨å…¶ä»–ç±»æ— æ³•è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ä¸­çš„æˆå‘˜ã€‚
- **è®¿é—®ä¿®é¥°ç¬¦**ï¼šä¸èƒ½æ·»åŠ è®¿é—®ä¿®é¥°ç¬¦ã€‚
- **é™æ€æˆå‘˜é™åˆ¶**ï¼šå±€éƒ¨å†…éƒ¨ç±»ä¸èƒ½å®šä¹‰è‡ªå·±çš„é™æ€æˆå‘˜ï¼ˆå¦‚é™æ€åˆå§‹åŒ–å—ã€æˆå‘˜æ¥å£ã€é™æ€æ–¹æ³•å’Œé™æ€å˜é‡ï¼‰ï¼Œå¸¸é‡é™¤å¤–ã€‚
- **ä½œç”¨åŸŸèŒƒå›´**ï¼šä»…é™äºå®šä¹‰å®ƒçš„æ–¹æ³•æˆ–ä»£ç å—ã€‚
- **å˜é‡é‡åå¤„ç†**ï¼š
  - å½“å˜é‡é‡åæ—¶ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™ã€‚
  - åœ¨å±€éƒ¨å†…éƒ¨ç±»çš„æ–¹æ³•ä¸­æƒ³è®¿é—®å±€éƒ¨å†…éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ `this.åŒåæˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚
  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»ä¸­çš„åŒåæˆå‘˜å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `OuterClass.this.åŒåæˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚

### åŒ¿åå†…éƒ¨ç±»ï¼ˆAnonymous Inner Classï¼‰

> [!tip]
>
> åŒ¿åå†…éƒ¨ç±»å…¶å®æ˜¯å±€éƒ¨å†…éƒ¨ç±»çš„ç®€å†™å½¢å¼ï¼Œä¸¤è€…æœ¬è´¨ä¸Šæ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œå¯ä»¥å‚è€ƒ[å±€éƒ¨å†…éƒ¨ç±»](#local-inner-class)ä¸­çš„å†…å®¹ï¼

### é™æ€å†…éƒ¨ç±»ï¼ˆStatic Nested Classï¼‰

- **è®¿é—®å¤–éƒ¨ç±»æˆå‘˜**ï¼šé™æ€å†…éƒ¨ç±»å¯ä»¥ç›´æ¥è®¿é—®å¤–éƒ¨ç±»çš„é™æ€æˆå‘˜ï¼ˆé™æ€å˜é‡å’Œé™æ€æ–¹æ³•ï¼‰ï¼Œä½†æ˜¯ä¸èƒ½ç›´æ¥è®¿é—®éé™æ€æˆå‘˜ï¼Œå¿…é¡»é€šè¿‡ä¸€ä¸ªæŒ‡å‘å¤–éƒ¨ç±»å®ä¾‹çš„å¼•ç”¨æ‰èƒ½è®¿é—®å¤–éƒ¨ç±»ä¸­çš„å®ä¾‹å˜é‡å’Œæ–¹æ³•ã€‚

- **å¤–éƒ¨ç±»è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„éé™æ€æˆå‘˜**ï¼š

  - å¤–éƒ¨ç±»è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„éé™æ€æˆå‘˜æ—¶ï¼Œéœ€è¦å…ˆåˆ›å»ºé™æ€å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡è¯¥å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ã€‚

  - å¤–éƒ¨å…¶ä»–ç±»è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„éé™æ€æˆå‘˜æ—¶ï¼Œå¯ä»¥ç›´æ¥åˆ›å»ºé™æ€å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œè€Œä¸éœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡ï¼Œç„¶åé€šè¿‡é™æ€å†…éƒ¨ç±»çš„å®ä¾‹å¯¹è±¡è¿›è¡Œè®¿é—®ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    ```java
    // å®ä¾‹åŒ–é™æ€åµŒå¥—ç±»ï¼Œä¸å®ä¾‹åŒ–é¡¶çº§ç±»ç›¸åŒ
    OuterClass.StaticNestedClass staticNestedInstance = new OuterClass.StaticNestedClass();
    ```

- **è®¿é—®ä¿®é¥°ç¬¦**ï¼šå¯ä»¥æ·»åŠ ä»»æ„è®¿é—®ä¿®é¥°ç¬¦ï¼ˆç§æœ‰ `private`ã€å…¬æœ‰ `public`ã€å—ä¿æŠ¤ `protected` æˆ–è€…åŒ…ç§æœ‰ `default`ï¼‰ã€‚

- **ä½œç”¨åŸŸèŒƒå›´**ï¼šåŒå…¶ä»–å¤–éƒ¨ç±»æˆå‘˜ä¸€æ ·ï¼Œé™æ€å†…éƒ¨ç±»çš„ä½œç”¨åŸŸèŒƒå›´ä¸ºæ•´ä¸ªç±»ä½“ã€‚

- **å˜é‡é‡åå¤„ç†**ï¼š

  - å½“å˜é‡é‡åæ—¶ï¼Œé»˜è®¤éµå¾ªå°±è¿‘åŸåˆ™ã€‚
  - åœ¨é™æ€å†…éƒ¨ç±»çš„æ–¹æ³•ä¸­æƒ³è®¿é—®é™æ€å†…éƒ¨ç±»ä¸­çš„åŒåé™æ€æˆå‘˜å˜é‡ï¼Œå¯ä»¥ä½¿ç”¨ `InnerClass.åŒåé™æ€æˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚
  - å¦‚æœæƒ³è®¿é—®å¤–éƒ¨ç±»ä¸­çš„åŒåé™æ€æˆå‘˜å˜é‡æ—¶ï¼Œå¯ä»¥ä½¿ç”¨ `OuterClass.åŒåé™æ€æˆå‘˜å˜é‡` æ˜ç¡®æŒ‡å®šã€‚

## è¡¥å……çŸ¥è¯†ç‚¹

### é™æ€åˆå§‹åŒ–å—

é™æ€åˆå§‹åŒ–å—ï¼ˆStatic Initialization Blockï¼‰æ˜¯ Java ç­‰é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œç”¨äºåˆå§‹åŒ–ç±»çš„é™æ€æˆå‘˜å˜é‡ã€‚å®ƒæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ä»£ç å—ï¼Œå…¶ä¸»è¦ç‰¹ç‚¹å’Œç”¨é€”å¦‚ä¸‹ï¼š

1. **é™æ€åˆå§‹åŒ–å—çš„å®šä¹‰**ï¼š

   - é™æ€åˆå§‹åŒ–å—æ˜¯ç”± `{ ... }` æ‹¬èµ·æ¥çš„ä¸€æ®µä»£ç ï¼Œè¿™æ®µä»£ç ä¸»è¦ç”¨äºæ‰§è¡Œä¸€äº›é™æ€æˆå‘˜å˜é‡çš„åˆå§‹åŒ–æ“ä½œã€‚

   - å®ƒæ²¡æœ‰åå­—ï¼Œå› æ­¤ä¸èƒ½è¢«ç›´æ¥è°ƒç”¨ã€‚

   - å®ƒå¿…é¡»å£°æ˜ä¸º `static`ï¼Œä»¥è¡¨æ˜å®ƒæ˜¯å±äºç±»çš„ï¼Œè€Œä¸æ˜¯å®ä¾‹çš„ã€‚

2. **æ‰§è¡Œæ—¶æœº**ï¼š

   - é™æ€åˆå§‹åŒ–å—åªä¼šåœ¨ç±»é¦–æ¬¡è¢«åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡ã€‚

   - è¿™æ„å‘³ç€å½“ç¬¬ä¸€æ¬¡åˆ›å»ºè¯¥ç±»çš„å¯¹è±¡æˆ–ç¬¬ä¸€æ¬¡å¼•ç”¨è¯¥ç±»çš„é™æ€æˆå‘˜æ—¶ï¼Œé™æ€åˆå§‹åŒ–å—ä¼šè¢«æ‰§è¡Œã€‚

   - æ‰§è¡Œé¡ºåºï¼šå…ˆäºä»»ä½•æ„é€ å™¨è°ƒç”¨ä¹‹å‰æ‰§è¡Œã€‚

3. **ç”¨é€”**ï¼š

   - åˆå§‹åŒ–é™æ€å˜é‡ã€‚

   - æ‰§è¡Œåªéœ€è¦åœ¨ç±»åŠ è½½æ—¶å®Œæˆä¸€æ¬¡çš„æ“ä½œã€‚

ä¾‹å¦‚ï¼Œåœ¨ Java ä¸­ï¼Œä½ å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªåŒ…å«é™æ€åˆå§‹åŒ–å—çš„ç±»ï¼š

```java
public class ExampleClass {
    static int staticVariable;

    static {
        // é™æ€åˆå§‹åŒ–å—
        staticVariable = 10;
        System.out.println("Static initialization block executed.");
    }

    public ExampleClass() {
        // æ„é€ å™¨
        System.out.println("Constructor called.");
    }

    public static void main(String[] args) {
        ExampleClass example = new ExampleClass();
        System.out.println("Static variable value: " + staticVariable);
    }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œé™æ€åˆå§‹åŒ–å—ä¼šåœ¨ `ExampleClass` é¦–æ¬¡è¢«åŠ è½½æ—¶æ‰§è¡Œï¼Œè®¾ç½® `staticVariable` çš„å€¼ï¼Œå¹¶è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚å½“ä½ è¿è¡Œ `main` æ–¹æ³•æ—¶ï¼Œä½ ä¼šé¦–å…ˆçœ‹åˆ°é™æ€åˆå§‹åŒ–å—çš„æ¶ˆæ¯è¾“å‡ºï¼Œç„¶åæ˜¯æ„é€ å™¨çš„æ¶ˆæ¯è¾“å‡ºï¼Œæœ€åè¾“å‡ºé™æ€å˜é‡çš„å€¼ã€‚

### å®ä¾‹åˆå§‹åŒ–å—

å®ä¾‹åˆå§‹åŒ–å—ï¼ˆInstance Initializer Blockï¼‰æ˜¯Javaç­‰é¢å‘å¯¹è±¡ç¼–ç¨‹è¯­è¨€ä¸­çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå®ƒç”¨äºåˆå§‹åŒ–ç±»çš„å®ä¾‹å˜é‡ã€‚ä¸‹é¢æ˜¯ä¸€äº›å…³é”®ç‚¹æ¥å¸®åŠ©ä½ ç†è§£å®ä¾‹åˆå§‹åŒ–å—ï¼š

1. **å®šä¹‰**ï¼š
   - å®ä¾‹åˆå§‹åŒ–å—æ˜¯ç”± `{ ... }` æ‹¬èµ·æ¥çš„ä¸€æ®µä»£ç ï¼Œè¿™æ®µä»£ç ä¸»è¦ç”¨äºæ‰§è¡Œä¸€äº›åˆå§‹åŒ–æ“ä½œï¼Œç‰¹åˆ«æ˜¯åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚
   - å®ƒæ²¡æœ‰åå­—ï¼Œå› æ­¤ä¸èƒ½è¢«ç›´æ¥è°ƒç”¨ã€‚
2. **æ‰§è¡Œæ—¶æœº**ï¼š
   - å®ä¾‹åˆå§‹åŒ–å—åœ¨æ¯ä¸ªå¯¹è±¡åˆ›å»ºæ—¶éƒ½ä¼šè¢«æ‰§è¡Œã€‚
   - å®ƒä»¬åœ¨æ„é€ å™¨è¢«è°ƒç”¨ä¹‹å‰æ‰§è¡Œã€‚
   - å¦‚æœç±»ä¸­æœ‰å¤šä¸ªå®ä¾‹åˆå§‹åŒ–å—ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§åœ¨ç±»ä¸­å‡ºç°çš„é¡ºåºä¾æ¬¡æ‰§è¡Œã€‚
3. **ç”¨é€”**ï¼š
   - åˆå§‹åŒ–å®ä¾‹å˜é‡ã€‚
   - æ‰§è¡Œåªéœ€è¦åœ¨æ¯ä¸ªå¯¹è±¡åˆ›å»ºæ—¶å®Œæˆä¸€æ¬¡çš„æ“ä½œã€‚

ä¾‹å¦‚ï¼Œåœ¨Javaä¸­ï¼Œä½ å¯ä»¥è¿™æ ·å®šä¹‰ä¸€ä¸ªåŒ…å«å®ä¾‹åˆå§‹åŒ–å—çš„ç±»ï¼š

```java
public class ExampleClass {
    int instanceVariable;

    {
        // å®ä¾‹åˆå§‹åŒ–å—
        instanceVariable = 10;
        System.out.println("Instance initialization block executed.");
    }

    public ExampleClass() {
        // æ„é€ å™¨
        System.out.println("Constructor called.");
    }

    public static void main(String[] args) {
        ExampleClass example = new ExampleClass();
        System.out.println("Instance variable value: " + example.instanceVariable);
    }
}
```

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå®ä¾‹åˆå§‹åŒ–å—ä¼šåœ¨æ¯æ¬¡åˆ›å»º `ExampleClass` çš„å¯¹è±¡æ—¶æ‰§è¡Œï¼Œè®¾ç½® `instanceVariable` çš„å€¼ï¼Œå¹¶è¾“å‡ºä¸€æ¡æ¶ˆæ¯ã€‚å½“ä½ è¿è¡Œ `main` æ–¹æ³•æ—¶ï¼Œä½ ä¼šé¦–å…ˆçœ‹åˆ°å®ä¾‹åˆå§‹åŒ–å—çš„æ¶ˆæ¯è¾“å‡ºï¼Œç„¶åæ˜¯æ„é€ å™¨çš„æ¶ˆæ¯è¾“å‡ºï¼Œæœ€åè¾“å‡ºå®ä¾‹å˜é‡çš„å€¼ã€‚

## å‚è€ƒèµ„æ–™ğŸ

- ğŸ“ƒæ–‡æ¡£
  - [Nested Classes (The Javaâ„¢ Tutorials > Learning the Java Language > Classes and Objects) (oracle.com)](https://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)
- ğŸ“ºè§†é¢‘
  - [ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯ã€‹ ç¬¬6ç« ï¼šæ¥å£ã€Lambdaè¡¨è¾¾å¼å’Œå†…éƒ¨ç±»](https://www.bilibili.com/video/BV1cS4y1r71U?vd_source=84272a2d7f72158b38778819be5bc6ad)
  - [ã€æ¯å¤©ä¸€ä¸ªæŠ€æœ¯ç‚¹ã€‘æŒæ¡è¿™ä¸€ä¸ªæ¦‚å¿µï¼Œè®©ä½ è½»æ¾ææ‡‚å››ç§å†…éƒ¨ç±»](https://www.bilibili.com/video/BV1tq4y1e7M7?vd_source=84272a2d7f72158b38778819be5bc6ad)
